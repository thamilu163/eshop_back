# Test Database Configuration - Use H2 in-memory database
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA Configuration for Tests
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# Disable security auto-config if tests need it (keep, but still provide properties)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
# JWT Configuration for Tests
jwt.secret=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970
jwt.expiration=86400000
jwt.refresh-expiration=604800000
# OAuth2 / Keycloak test defaults (provide issuer to avoid missing-placeholder failures)
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost/mock-issuer
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost/mock-issuer/.well-known/jwks.json
# Keycloak placeholders used by application code (provide safe defaults for tests)
keycloak.auth-server-url=http://localhost:8080/realms/eshop
keycloak.realm=eshop
keycloak.client-id=eshop-client
keycloak.client-secret=test-secret
keycloak.enabled=false
# Cache Configuration for Tests
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=100,expireAfterAccess=60s

# CORS Configuration for Tests
app.cors.allowed-origins=http://localhost:3000
app.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true
app.cors.max-age=3600

# Disable startup credential enforcement during tests
app.startup.validate-credentials=false
app.cors.exposed-headers=Authorization,Content-Type,X-Request-Id
spring.application.name=ecommerce-backend









